i = 2
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = 2
lines(obj$q0001a * .35, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
wvec = seq(6,1,.5)
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = 2
lines(obj$q0001a * .35, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = 1
wvec = seq(3,1,.25)
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = 2
lines(obj$q0001a * .35, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = 1
wvec[i]
wvec = seq(3,1,.25)
wvec = seq(3, 1, -.25)
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = 2
lines(obj$q0001a * .35, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = 1
plot(obj$summer, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = 2
lines(obj$winter, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = 3
lines(obj$fall, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i= 4
lines(obj$spring, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
{
i = 1
plot(obj$summer, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = 2
lines(obj$winter, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = 3
lines(obj$fall, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = 4
lines(obj$spring, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
{
i = 1
plot(obj$Sep, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Oct, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Nov, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Dec, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jan, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Feb, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Mar, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Apr, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$May, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jun, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jul, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Aug, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
cvec <- RColorBrewer::brewer.pal(12, 'Set1')
cvec <- RColorBrewer::brewer.pal(12, 'Set3')
lvec <- 1:12
wvec = seq(3, 1, -.25)
{
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$q0001a * .35, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
{
i = 1
plot(obj$summer, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$winter, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$fall, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$spring, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
{
i = 1
plot(obj$Sep, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Oct, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Nov, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Dec, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jan, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Feb, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Mar, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Apr, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$May, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jun, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jul, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Aug, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
cvec <- RColorBrewer::brewer.pal(12, 'Accent')
cvec <- RColorBrewer::brewer.pal(12, 'Dark')
cvec <- RColorBrewer::brewer.pal(12, 'Dark2')
cvec <- RColorBrewer::brewer.pal(12, 'Dark2')
cvec <- RColorBrewer::brewer.pal(12, 'Paired')
lvec <- 1:12
wvec = seq(3, 1, -.25)
{
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$q0001a * .35, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
{
i = 1
plot(obj$summer, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$winter, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$fall, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$spring, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
{
i = 1
plot(obj$Sep, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Oct, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Nov, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Dec, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jan, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Feb, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Mar, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Apr, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$May, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jun, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jul, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Aug, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i], bty='l')
{
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i], bty='l')
i = i + 1
lines(obj$q0001a * .35, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
{
i = 1
plot(obj$summer, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i], bty='l')
i = i + 1
lines(obj$winter, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$fall, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$spring, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
{
i = 1
plot(obj$Sep, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i], bty='l')
i = i + 1
lines(obj$Oct, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Nov, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Dec, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jan, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Feb, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Mar, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Apr, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$May, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jun, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jul, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Aug, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i],
bty='l', main = "NHD flow annual flow volume vs. NWM 1.0")
{
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i],
bty='l', main = "NHD flow annual flow volume vs. NWM 1.0", xlab = 'COMID Index', ylab = 'flow')
i = i + 1
lines(obj$q0001a / 100, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
{
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i],
bty='l', main = "NHD flow annual flow volume vs. NWM 1.0", xlab = 'COMID Index', ylab = 'flow')
i = i + 1
lines(obj$q0001a / 10, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
lines(obj$q0001a / 5, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i],
bty='l', main = "NHD flow annual flow volume vs. NWM 1.0", xlab = 'COMID Index', ylab = 'Flow (cfs)')
{
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i],
bty='l', main = "NHD flow annual flow volume vs. NWM 1.0", xlab = 'COMID Index', ylab = 'Flow (cfs)')
i = i + 1
lines(obj$q0001a / 5, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
## q0001a is fow from runoff in cfs
}
{
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i],
bty='l', main = "NHD annual flow volume vs. NWM 1.0", xlab = 'COMID Index', ylab = 'Flow (cfs)')
i = i + 1
lines(obj$q0001a / 5, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
## q0001a is fow from runoff in cfs
}
{
i = 1
plot(obj$summer, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i], bty='l',
main = "NWM 1.0 Seasonal Flow Volumes", xlab = 'COMID Index', ylab = 'Flow (cfs)')
i = i + 1
lines(obj$winter, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$fall, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$spring, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
{
i = 1
plot(obj$Sep, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i], bty='l',
main = "NWM 1.0 Monthly Flow Volumes", xlab = 'COMID Index', ylab = 'Flow (cfs)')
i = i + 1
lines(obj$Oct, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Nov, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Dec, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jan, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Feb, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Mar, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Apr, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$May, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jun, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jul, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Aug, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
{
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i],
bty='l', main = "NHD annual flow volume vs. NWM 1.0: Colorado Springs COMIDs", xlab = 'COMID Index', ylab = 'Flow (cfs)')
i = i + 1
lines(obj$q0001a / 5, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
## q0001a is fow from runoff in cfs
}
{
i = 1
plot(obj$summer, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i], bty='l',
main = "NWM 1.0 Seasonal Flow Volumes: Colorado Springs COMIDs", xlab = 'COMID Index', ylab = 'Flow (cfs)')
i = i + 1
lines(obj$winter, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$fall, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$spring, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
{
i = 1
plot(obj$Sep, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i], bty='l',
main = "NWM 1.0 Monthly Flow Volumes: Colorado Springs COMIDs", xlab = 'COMID Index', ylab = 'Flow (cfs)')
i = i + 1
lines(obj$Oct, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Nov, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Dec, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jan, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Feb, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Mar, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Apr, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$May, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jun, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jul, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Aug, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
{
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i],
bty='l', main = "NHD annual flow volume vs. NWM 1.0: Colorado Springs COMIDs", xlab = 'COMID Index', ylab = 'Flow (cfs)')
i = i + 1
lines(obj$q0001a / 5, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
## q0001a is fow from runoff in cfs
}
{
i = 1
plot(obj$summer, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i], bty='l',
main = "NWM 1.0 Seasonal Flow Volumes: Colorado Springs COMIDs", xlab = 'COMID Index', ylab = 'Flow (cfs)')
i = i + 1
lines(obj$winter, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$fall, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$spring, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
{
i = 1
plot(obj$Sep, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i], bty='l',
main = "NWM 1.0 Monthly Flow Volumes: Colorado Springs COMIDs", xlab = 'COMID Index', ylab = 'Flow (cfs)')
i = i + 1
lines(obj$Oct, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Nov, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Dec, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jan, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Feb, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Mar, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Apr, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$May, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jun, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Jul, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
i = i + 1
lines(obj$Aug, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
}
devtools::load_all(".")
devtools::document()
devtools::document()
lines(obj$q0001a / 10, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
{
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i],
bty='l', main = "NHD annual flow volume vs. NWM 1.0: Colorado Springs COMIDs", xlab = 'COMID Index', ylab = 'Flow (cfs)')
i = i + 1
lines(obj$q0001a / 10, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
## q0001a is fow from runoff in cfs
}
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i],
bty='l', main = "NHD annual flow volume vs. NWM 1.0: Colorado Springs COMIDs", xlab = 'COMID Index', ylab = 'Flow (cfs)')
i = i + 1
i = 1
plot(obj$annual/12, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i],
bty='l', main = "NHD annual flow volume vs. NWM 1.0: Colorado Springs COMIDs", xlab = 'COMID Index', ylab = 'Flow (cfs)')
i = i + 1
lines(obj$q0001a / 10, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
{
i = 1
plot(obj$annual, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i],
bty='l', main = "NHD annual flow volume vs. NWM 1.0: Colorado Springs COMIDs", xlab = 'COMID Index', ylab = 'Flow (cfs)')
i = i + 1
lines(obj$q0001a / 10, type = 'l', lwd = wvec[i], lty = lvec[i], col = cvec[i])
## q0001a is fow from runoff in cfs
}
devtools::load_all(".")
devtools::load_all(".")
tst = nwmRetro::nwm_averages
head(tst$tz_index)
timezones
head(tst$tz_index)
tst = AOI::getAOI("Colorado Springs")
tst = AOI::getAOI("Colorado Springs") %>% find() %>% join()
plot(tst[,1])
plot(tst[1,])
plot(tst[[1]])
head(test)
head(tst)
plot(tst[['fall']])
sp::plot(tst[['fall']])
class(tst)
obj = AOI::getAOI("Colorado Springs") %>% find()
ids = obj$comid
if(is.null(ids)){stop("Input object doesn't contain COMID values")}
retro = nwmRetro::nwm_averages
retro = retro[retro$COMID %in% ids,]
retro$annual = rowMeans(retro[,c(2:12)])
retro$fall   = rowMeans(retro[,c(10,11,12)])
retro$spring = rowMeans(retro[,c(4,5,6)])
retro$summer = rowMeans(retro[,c(7,8,9)])
retro$winter = rowMeans(retro[,c(13,2,3)])
obj.new  = merge(obj, retro, by.x = "comid", by.y = 'COMID')
obj.new
cat(crayon::cyan("NWM retro and NHD merged successful!\n"))
devtools::load_all(".")
obj = AOI::getAOI("Colorado Springs") %>% find() %>% join()
class(obj)
obj.new
plot(obj.new)
library(leaflet)
leaflet() %>% addTiles() %>% addPolylines(obj.new)
leaflet() %>% addTiles() %>% addPolylines(data = obj.new)
obj.new <- st_as_sf(obj.new)
obj.new <- sf::st_as_sf(obj.new)
obj.new <- sf::st_as_sf(obj.new)
obj.new
class(obj.new)
plot(obj.new[["fall"]])
plot(obj.new["fall"])
devtools::load_all(".")
plot(obj.new['fall'])
plot(obj.new['fall'], pal = rev(sf::sf.colors(10)))
plot(obj.new['fall'], pal = rev(sf::sf.colors()))
plot(obj.new['fall'], pal = rev(sf::sf.colors(10,1)))
plot(obj.new['fall'], pal = rev(sf::sf.colors(10,1, 1)))
plot(obj.new['fall'], pal = pal = sf.colors(10))
plot(obj.new['fall'], pal = sf.colors(10))
plot(obj.new['fall'], pal = sf::sf.colors(10))
plot(obj.new['fall'], pal = blues9)
plot(obj.new['fall'], pal = blues9())
plot(obj.new['fall'], pal = blues9)
plot(obj.new['fall'], pal = blues9(10))
blues9(10)
plot(obj.new['fall'], pal = blues9)
join = function(obj){
ids = obj$comid
if(is.null(ids)){stop("Input object doesn't contain COMID values")}
retro = nwmRetro::nwm_averages
retro = retro[retro$COMID %in% ids,]
retro$annual = rowMeans(retro[,c(2:12)])
retro$fall   = rowMeans(retro[,c(10,11,12)])
retro$spring = rowMeans(retro[,c(4,5,6)])
retro$summer = rowMeans(retro[,c(7,8,9)])
retro$winter = rowMeans(retro[,c(13,2,3)])
obj.new  = merge(obj, retro, by.x = "comid", by.y = 'COMID')
obj.new <- sf::st_as_sf(obj.new)
cat(crayon::cyan("NWM retro and NHD merged successful!\n"))
return(obj.new)
}
plot(obj.new['fall'], pal = blues9)
obj = AOI::getAOI("Colorado Springs") %>%
find() %>%
join() %>%
write(file = '/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro_grandCanyon.gpkg')
obj = AOI::getAOI("Colorado Springs")
obj = AOI::getAOI("Colorado Springs") %>%
find()
tst = join(obj)
class(tst)
obj = AOI::getAOI("Colorado Springs") %>%
find() %>%
join()
class(obj)
obj
grep("Spatial", class(obj))
if(grep("Spatial", class(obj))) { obj = sf::st_as_sf(obj)}
class(obj)
if(any(grep("Spatial", class(obj)))) { obj = sf::st_as_sf(obj)}
good.ext = c('shp', 'csv', 'gpkg', 'geojson', 'sqlite', 'xlsx', 'rda')
ext = getExtension(file)
if(is.null(ext)){ stop("'file' must include an file name with extension") }
if(!(ext %in% good.ext)) { stop(paste0("file must be one of: '.",  paste(good.ext, collapse = "', '."), "'")) }
file = '/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro_grandCanyon.gpkg'
ext = getExtension(file)
if(is.null(ext)){ stop("'file' must include an file name with extension") }
if(!(ext %in% good.ext)) { stop(paste0("file must be one of: '.",  paste(good.ext, collapse = "', '."), "'")) }
if(is.null(layer)){ layer = gsub(paste0(".", ext), "", basename(file)) }
layer = NULL
devtools::load_all(".")
devtools::load_all(".")
obj = AOI::getAOI("Colorado Springs") %>%
find() %>%
join() %>%
write(file = '/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro_grandCanyon.gpkg')
class(obj)
devtools::load_all(".")
devtools::load_all(".")
