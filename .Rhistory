source('~/Documents/GitHub/nwmRetro/R/utility_cida_query.R', echo=TRUE)
devtools::document()
devtools::document()
disable(project = NULL, restart = TRUE)
packrat::disable(project = NULL, restart = TRUE)
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
devtools::document()
nhd = findNHD(AOI::getAOI("Colorado Springs"))
plot(nhd)
plot(nhd$nhd)
head(nhd)
source('~/Documents/GitHub/nwmRetro/R/findNHD.R', echo=TRUE)
devtools::load_all(".")
nhd = findNHD(AOI::getAOI("Colorado Springs"))
head(nhd)
save
obj = nhd$nhd
fn = '/Users/mikejohnson/Documents/GitHub/ACISmeta.rda'
splitted    <- strsplit(x=fn, split='/')[[1]]
splitted
fn          <- splitted [length(splitted)]
fn
ext         <- ''
splitted    <- strsplit(x=fn, split='\\.')[[1]]
splitted
l           <-length (splitted)
l
l > 1
sum(splitted[1:(l-1)]
sum(splitted[1:(l-1)] != '')
sum(splitted[1:(l-1)] != '')
ext <-splitted [l]
ext
fn = '/Users/mikejohnson/Documents/GitHub/ACISmeta.rda'
xx = /Users/mikejohnson/Documents/GitHub
getExtensionxx
getExtension(xx)
getExtension <- function (path) {
splitted    <- strsplit(x=path, split='/')[[1]]
path          <- splitted [length(splitted)]
ext         <- ''
splitted    <- strsplit(x=path, split='\\.')[[1]]
l           <-length (splitted)
if (l > 1 && sum(splitted[1:(l-1)] != ''))  ext <-splitted [l]
return(ext)
}
xx = '/Users/mikejohnson/Documents/GitHub'
getExtension(xx)
xx = '/Users/mikejohnson/Documents/GitHub/test.csv'
getExtension(xx)
xx = '/Users/mikejohnson/Documents/GitHub/test.rda'
st_write(obj, dsn = "/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.rda", layer = "nhd_flowlines")
sf::st_write(obj, dsn = "/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.rda", layer = "nhd_flowlines")
sf::st_write(obj, dsn = "/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.csv", layer = "nhd_flowlines")
sf::st_write(obj, dsn = "/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.shp", layer = "nhd_flowlines")
warnings()
sf::st_write(obj, dsn = "/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.gpkg", layer = "nhd_flowlines")
sf::st_write(obj, dsn = "/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.gbd", layer = "nhd_flowlines")
sf::st_write(obj, dsn = "/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.gdb", layer = "nhd_flowlines")
sf::st_write(obj, dsn = "/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.geojson", layer = "nhd_flowlines")
sf::st_write(obj, dsn = "/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.sqlite", layer = "nhd_flowlines")
sf::st_write(obj, dsn = "/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.xls", layer = "nhd_flowlines")
sf::st_write(obj, dsn = "/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.xlsx", layer = "nhd_flowlines")
file
save(obj, file = '/Users/mikejohnson/Documents/GitHub/nwmRetro/data' )
good.ext = c('shp', 'csv', 'gpkg', 'geojson', 'sqlite', 'xlsx', 'rda')
paste("type must be one of:",  paste(good.ext, collapse = " ,"))
paste("file must be one of:",  paste(good.ext, collapse = ", ."))
paste("file must be one of:",  paste(good.ext, collapse = "', '."))
paste("file must be one of:",  paste(good.ext, collapse = "', '.'"), "'")
paste0("file must be one of: ",  paste(good.ext, collapse = "', '.'"), "'")
paste0("file must be one of: '.",  paste(good.ext, collapse = "', '."), "'")
cat(file successfully written!)
cat('file successfully written!')
cat(ext, 'file successfully written!')
write = function(obj, file = stop("'file' must be specified")){
write = function(obj, file = stop("'file' must be specified")){
good.ext = c('shp', 'csv', 'gpkg', 'geojson', 'sqlite', 'xlsx', 'rda')
good.ext = c('shp', 'csv', 'gpkg', 'geojson', 'sqlite', 'xlsx', 'rda')
ext = getExtension(file)
file = '/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.shp'
good.ext = c('shp', 'csv', 'gpkg', 'geojson', 'sqlite', 'xlsx', 'rda')
ext = getExtension(file)
if(is.null(ext)){ stop("'file' must include an file name with extension") }
if(!(type %in% good.ext)) { stop(paste0("file must be one of: '.",  paste(good.ext, collapse = "', '."), "'")) }
if(!(ext %in% good.ext)) { stop(paste0("file must be one of: '.",  paste(good.ext, collapse = "', '."), "'")) }
if(ext == 'rda'){
save(obj, file = file, compress = 'xz')
}else{
suppressWarnings( sf::st_write(obj,
dsn = file,
layer = "nhd_flowlines",
overw)
}
cat(ext, 'file successfully written!')
}
file = '/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.shp'
st_write
sf::st_write
write = function(obj, file = stop("'file' must be specified"), layer = NULL){
write = function(obj, file = stop("'file' must be specified"), layer = NULL){
write = function(obj, file = stop("'file' must be specified"), layer = NULL){
good.ext = c('shp', 'csv', 'gpkg', 'geojson', 'sqlite', 'xlsx', 'rda')
ext = getExtension(file)
if(is.null(ext)){ stop("'file' must include an file name with extension") }
if(!(ext %in% good.ext)) { stop(paste0("file must be one of: '.",  paste(good.ext, collapse = "', '."), "'")) }
if(is.null(layer)){ layer = gsub(paste0(".", ext), "", basename(file)) }
if(ext == 'rda'){
save(obj, file = file, compress = 'xz')
}else{
suppressWarnings( sf::st_write(obj,
dsn = file,
layer = layer,
overw)
}
cat(ext, 'file successfully written!')
}
write = function(obj, file = stop("'file' must be specified"), layer = NULL){
write = function(obj, file = stop("'file' must be specified"), layer = NULL){
good.ext = c('shp', 'csv', 'gpkg', 'geojson', 'sqlite', 'xlsx', 'rda')
ext = getExtension(file)
if(is.null(ext)){ stop("'file' must include an file name with extension") }
if(!(ext %in% good.ext)) { stop(paste0("file must be one of: '.",  paste(good.ext, collapse = "', '."), "'")) }
if(is.null(layer)){ layer = gsub(paste0(".", ext), "", basename(file)) }
if(ext == 'rda'){
save(obj, file = file, compress = 'xz')
}else{
suppressWarnings( sf::st_write(obj,
dsn = file,
layer = layer) )
}
cat(ext, 'file successfully written!')
}
file = '/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.shp'
obj %>% write(file = file)
devtools::load_all(".")
obj %>% write(file = file)
devtools::load_all(".")
file = '/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.shp'
obj %>% write(file = file)
devtools::load_all(".")
obj %>% write(file = file)
devtools::document()
devtools::load_all(".")
obj %>% write(file = file)
write = function(obj, file = stop("'file' must be specified"), layer = NULL){
good.ext = c('shp', 'csv', 'gpkg', 'geojson', 'sqlite', 'xlsx', 'rda')
ext = getExtension(file)
if(is.null(ext)){ stop("'file' must include an file name with extension") }
if(!(ext %in% good.ext)) { stop(paste0("file must be one of: '.",  paste(good.ext, collapse = "', '."), "'")) }
if(is.null(layer)){ layer = gsub(paste0(".", ext), "", basename(file)) }
if(ext == 'rda'){
save(obj, file = file, compress = 'xz')
}else{
suppressWarnings( sf::st_write(obj,
dsn = file,
layer = layer,
overwrite = TRUE) )
}
cat(ext, 'file successfully written!')
}
file = '/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.shp'
obj %>% write(file = file)
layer = NULL
good.ext = c('shp', 'csv', 'gpkg', 'geojson', 'sqlite', 'xlsx', 'rda')
ext = getExtension(file)
if(is.null(ext)){ stop("'file' must include an file name with extension") }
if(!(ext %in% good.ext)) { stop(paste0("file must be one of: '.",  paste(good.ext, collapse = "', '."), "'")) }
if(is.null(layer)){ layer = gsub(paste0(".", ext), "", basename(file)) }
if(ext == 'rda'){
save(obj, file = file, compress = 'xz')
}else{
suppressWarnings( sf::st_write(obj,
dsn = file,
layer = layer) )
}
suppressWarnings( sf::st_write(obj,
dsn = file,
layer = layer) )
suppressWarnings( sf::st_write(obj,
dsn = file,
layer = layer,
update = TRUE) )
?st_write
suppressWarnings( sf::st_write(obj,
dsn = file,
layer = layer,
delete_dsn = TRUE) )
file = '/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.shp'
obj %>% write(file = file)
write = function(obj, file = stop("'file' must be specified"), layer = NULL){
good.ext = c('shp', 'csv', 'gpkg', 'geojson', 'sqlite', 'xlsx', 'rda')
ext = getExtension(file)
if(is.null(ext)){ stop("'file' must include an file name with extension") }
if(!(ext %in% good.ext)) { stop(paste0("file must be one of: '.",  paste(good.ext, collapse = "', '."), "'")) }
if(is.null(layer)){ layer = gsub(paste0(".", ext), "", basename(file)) }
if(ext == 'rda'){
save(obj, file = file, compress = 'xz')
}else{
suppressWarnings( sf::st_write(obj,
dsn = file,
layer = layer,
delete_dsn = TRUE) )
}
cat(ext, 'file successfully written!')
}
file = '/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.shp'
obj %>% write(file = file)
file = '/Users/mikejohnson/Documents/GitHub/nwmRetro/data/nwmRetro.csv'
obj %>% write(file = file)
class(obj) != 'sf'
class(obj)
devtools::load_all(".")
devtools
devtools::document()
devtools::document()
devtools::document()
devtools::load_all(".")
devtools::document()
devtools::document()
devtools::load_all(".")
devtools::document()
devtools::document()
?getRetro
devtools::document()
devtools::document()
devtools::load_all(".")
devtools::load_all(".")
